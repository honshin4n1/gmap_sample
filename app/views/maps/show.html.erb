<h2>gmap</h2>
<h1><%= @map.id %></h1>
<h1><%= @map.address %></h1>
<h1><%= @map.latitude %></h1>
<h1><%= @map.longitude %></h1>
<div id='map'>
</div>

<style>
  #map{
    height: 400px;
  }
</style>

<script>
let mapInstance

function initMap(){
  // geocoderを初期化

  mapInstance = new google.maps.Map(document.getElementById('map'), {
  center: {lat: <%= @map.latitude %>, lng: <%= @map.longitude %>},
  zoom: 16
  });
}

</script>


<script type="text/javascript">
let mapInstance
  function(){
  // 位置情報をもつ変数を用意
  let pos = new google.maps.LatLng(
   <%= @map.latitude %>, //latitude
   <%= @map.longitude %>  //longitude
  );

  mapInstance.setCenter(pos)
  let marker = new google.maps.Marker({
    map: mapInstance,
    position: pos
  });
  }
</script>



<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV["GOOGLE_API_KEY"] %>&callback=initMap" async defer></script>